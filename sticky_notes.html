<!DOCTYPE html>
<html>
<head>
<title>Sticky Notes</title>
    
<link rel="stylesheet" type="text/css" href="sticky_notes_css.css">    

<script
  src="https://code.jquery.com/jquery-3.2.1.js"></script>
    
<link rel="stylesheet" href="https://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.min.css"/>
    
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.js"></script>
    
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

   
    
</head>
    
<body>

    <div id="board">
        
        
    
    
    </div>
    
    <div id="testDiv"></div>
</body>
 
<script>
    
$(document).ready(function(){
    
    
    
    loadNotes(); // POPULATE THE BOARD WITH STICKY NOTES CALLED HERE!!!
    
    $("#board").dblclick( function(e){
        
        var placeholder = "Type here..."
        var position = {
            top: event.pageY,
            left: event.pageX,
        };
   
       createNote(placeholder, position);
            
   
        });
        
        
    $(".newNote").draggable();
    
    
    
});
    
    
       
    $(document).on("mousedown", '.newNote', function (e) {    // BRINGS THE SELECTED STICKY NOTE TO THE FRONT
        
       $('.newNote').css("zIndex", '1');
        $(this).css('zIndex', '1000');
        
    });


 
    $(document).on("click", '#deleteButton', function (e) {
        $(event.target).parent().fadeOut(200, function () { $(this).remove(), saveText(); });
        
        
    });
    
    function loadNotes(){                                           //LOAD NOTES - LOAD NOTES - LOAD NOTES
       
        var notes = JSON.parse(localStorage.stickyNote || "[]");
        
    $.each(notes, function (i, note) {
        
        createNote(note.text, note.position);
        
    })
    return notes
        
       
    };
    
    function saveText(){                                              //SAVE NOTES - SAVE NOTES - SAVE NOTES
        
        
        
        notes = $("#board .newNote").map(function (i) {
        return {
            text: $("#textArea", this).val(),
            position: $(this).offset()
        }
    }).get()
    
    localStorage.stickyNote = JSON.stringify(notes)
        
    };
    
    function createNote(text, position){                               //CREATE NOTES - CREATE NOTES - CREATE NOTES
        
        
        
        var sticky = $("<div class='newNote' > <button id='deleteButton'>X</button> </div>").draggable({
        stop: saveText
    }).css({
            
            position: "absolute",
            top: position.top,
            left: position.left,
            height: 300,
            width: 250,
           
        
   
        }).dblclick(function(e){
        
        event.stopPropagation();
        
        });
        
        var stickyText = $('<textarea id="textArea" class="theText">' + text + '</textarea>').css({
        
        'resize' : "none"
            
        }).dblclick(function(e){
        
        event.stopPropagation();
        
        });
        
        
        
        stickyText.appendTo(sticky); 
        
        stickyText.keyup(saveText);                                       // SAVING TO LOCAL STORAGE FUNCTION CALLED HERE!!!!
                
        
    $(sticky).prependTo($("#board")); 
        
   
        
    };
    

    
    
</script>
    

   
    

